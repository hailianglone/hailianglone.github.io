<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="动态码支付动态码支付，是渠道商根据用户订单生成对应支付二维码，用户打开支付宝或者微信扫一扫功能，进行扫码支付。渠道接入商接入流程：   明付平台分配给渠道商，对应的渠道号，虚拟门店号，款台号（门店号，款台号根据接入商对账要求和接入商一起定义规则）   接入商调用明付平台【下单】接口，取得对应支付二维码链接和对应平台订单号   接入商同时发起轮询【查询】接口，轮询间隔3~5,轮询5次，如果仍然没有收">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/2018/05/09/payment/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="动态码支付动态码支付，是渠道商根据用户订单生成对应支付二维码，用户打开支付宝或者微信扫一扫功能，进行扫码支付。渠道接入商接入流程：   明付平台分配给渠道商，对应的渠道号，虚拟门店号，款台号（门店号，款台号根据接入商对账要求和接入商一起定义规则）   接入商调用明付平台【下单】接口，取得对应支付二维码链接和对应平台订单号   接入商同时发起轮询【查询】接口，轮询间隔3~5,轮询5次，如果仍然没有收">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-05-09T15:38:35.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description" content="动态码支付动态码支付，是渠道商根据用户订单生成对应支付二维码，用户打开支付宝或者微信扫一扫功能，进行扫码支付。渠道接入商接入流程：   明付平台分配给渠道商，对应的渠道号，虚拟门店号，款台号（门店号，款台号根据接入商对账要求和接入商一起定义规则）   接入商调用明付平台【下单】接口，取得对应支付二维码链接和对应平台订单号   接入商同时发起轮询【查询】接口，轮询间隔3~5,轮询5次，如果仍然没有收">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-payment" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/09/payment/" class="article-date">
  <time datetime="2018-05-09T15:38:35.000Z" itemprop="datePublished">2018-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="动态码支付"><a href="#动态码支付" class="headerlink" title="动态码支付"></a>动态码支付</h1><p>动态码支付，是渠道商根据用户订单生成对应支付二维码，用户打开支付宝或者微信扫一扫功能，进行扫码支付。<br>渠道接入商接入流程： </p>
<ul>
<li><p>明付平台分配给渠道商，对应的渠道号，虚拟门店号，款台号（门店号，款台号根据接入商对账要求和接入商一起定义规则） </p>
</li>
<li><p>接入商调用明付平台【下单】接口，取得对应支付二维码链接和对应平台订单号 </p>
</li>
<li><p>接入商同时发起轮询【查询】接口，轮询间隔3~5,轮询5次，如果仍然没有收到支付确认，请重新【下单】刷新二维码，并提示用户重新扫码支付 </p>
</li>
<li><p>如果接入商有退款需求，可根据平台订单号进行【退款】操作 </p>
</li>
</ul>
<p><strong>注意</strong> 暂时不支持支付通知处理 </p>
<h2 id="下单生成二维码接口"><a href="#下单生成二维码接口" class="headerlink" title="下单生成二维码接口"></a>下单生成二维码接口</h2><ul>
<li><p>接口地址： 沙箱：<a href="https://realer.cn/api/payService/{version}/unifiedOrder" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/unifiedOrder</a><br> 默认版本号 1.0</p>
</li>
<li><p>参数列表 </p>
<p> 字段名  | 变量名 | 必填 | 类型 | 示例值 |　描述<br> ——–| —– | —–|——| —– | —<br> 渠道号  |channelId | 是 |　String | 1000 |<br> 门店编号 | storeNo | 是 | String | 100085 |<br> 设备编号 | posNo | 是 |　String | 100 | 动态码设备列表区间100~119<br> 收银员编号 | cashierNo | 否 | String | 02 |<br> 许可列号 | serierNo | 否 | String | fe2323df999 | 动态码请忽略<br> 用户ID | openId |　 否　  |  String | oG3werwerwer1221| 动态码请忽略<br> 接入商订单号 | orderNo | 否 | String | 1290012 | 接入商不传，默认平台订单号<br> 订单金额 | amount | 是 | int | 12 | 单位（分）<br> 订单时间 | beginTime | 是 | String  | 20180504123546 | yyyyMMddHHmmss<br> 支付类型 |　payType | 是 |  String  | WX_NATIVE | WX_NATIVE(微信）,ALI_NATIVE（支付宝）<br>  IP地址 | ip | 是|  String | 127.0.0.1 |<br>  币种 | currency | 否 |   String| CNY |<br>  商品详情 | goodsDetail | 否  |  String |  |  [{“goodsId”:”id0”,”goodsName”:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName”:”iname”,”price”:3,”quantity”:2}]<br>  备注 | comment |　否 |  String |  |<br>  签名 |　sign | 是 |   String | | 非空参数按ASCII 排序，末尾增加明付平台分配的KEY  </p>
</li>
</ul>
<ul>
<li><p>返回结果 </p>
<p>  字段名  | 变量名 | 必填 | 类型 | 示例值 |　描述<br> ——–| —– | —–|——| —– | —<br> 应用ID  | appId | 否 |　String | wxd678efh567hg6787 |<br> 时间戳 | timeStamp | 否 | String | 20180504123546 |<br> 随机串 | nonceStr | 否 |　String | wxd678efh567hg6787fsdfsd2 | 随机串<br> 数据包 | package | 否 | String | prepay_id=wx2017033010242291fcfe0db70013231072 | 统一下单接口返回的 prepay_id 参数值，提交格式如：prepay_id=wx2017033010242291fcfe0db70013231072<br> 签名方式 | signType | 否 | String | MD5 | 签名类型，默认为MD5，支持HMAC-SHA256和MD5。注意此处需与统一下单的签名类型一致<br> 签名 | paySign |　 否　  |  String | oG3werwerwer1221|<br> 明付平台订单号 | tradeNo | 是 | String | P98212781821288121 |<br> 第三方平台订单 | outTradeNo | 否 | String | 4001220181230456245 |<br> 二维码URL | codeUrl | 是 | String  | weixin://123.12121 | <strong>动态码关注字段</strong>  </p>
</li>
</ul>
<h2 id="订单查询接口"><a href="#订单查询接口" class="headerlink" title="订单查询接口"></a>订单查询接口</h2><p>仅仅支持明付订单号查询 </p>
<ul>
<li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/tradePayQuery" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/tradePayQuery</a><br> 默认版本号 1.0 </p>
</li>
<li><p>参数列表 </p>
<p>  字段名  | 变量名 | 必填 | 类型 | 示例值 |　描述<br> ——–| —– | —–|——| —– | —<br> 渠道号  |channelId | 是 |　String | 1000 |<br> 门店编号 | storeNo | 是 | String | 100085 |<br> 设备编号 | posNo | 是 |　String | 100 | 动态码设备列表区间100~119<br> 收银员编号 | cashierNo | 否 | String | 02 |<br> 许可列号 | serierNo | 否 | String | fe2323df999 | 动态码请忽略<br> 接入商订单号 | orderNo |　 否　  |  String | oG3werwerwer1221|<br> 明付商户订单号 | tradeNo | 是 | String | 1290012 | orderNo ,tradeNo 二选一，优先tradeNo<br> 支付类型 |　payType | 否 |  String  | WX_NATIVE | WX_NATIVE(微信）,ALI_NATIVE（支付宝）<br>  IP地址 | ip | 是|  String | 127.0.0.1 |<br>  备注 | comment |　否 |  String |  |<br>  签名 |　sign | 是 |   String | | 非空参数按ASCII 排序，末尾增加明付平台分配的KEY  </p>
</li>
<li><p>返回结果 </p>
<p>  字段名  | 变量名 | 必填 | 类型 | 示例值 |　描述<br> ——–| —– | —–|——| —– | —<br> 原单支付金额  |oriPayMoney | 否 |　int | 1000 |  单位（分），只有查询退款时，该值才有意义<br> 退款时，原单剩余可退金额 | oriSurplusMoney | 否 | int  | 1000 |  单位（分），只有查询退款时，该值才有意义<br> 退款时 ，原单接入商订单号 | oriOrderNo | 否 |　String | 201804211320 |<br> 退款时，原单明付平台流水号 | oriTradeSerial | 否 | String | P901283232343434 |<br> 退款时，原单三方平台流水号 | oriThirdTradeNo | 否 | String | 40092182888812121 |<br> 总支付金额 | needPayMoney |　 是　  |  int | 1000 | 终端发起的待付金额  needPayMoney=payMoney+thirdDiscountMoney+discountMoney+merchantDiscountMoney<br> 用户支付金额 | payMoney |　 是　  |  int | 1000 | 用户支付金额<br> 第三方优惠金额 | thirdDiscountMoney |　 否　  |  int | 1000 | 第三方优惠金额<br> 明付平台优惠金额 | discountMoney |　 否  |  int | 1000 | 明付平台优惠金额<br> 接入商优惠金额 | merchantDiscountMoney |　 否　  |  int | 1000 | 暂不支持<br> 交易时间 | tradeTime |　 是　  |  String | 20180504123546 | yyyyMMddHHmmss<br> 接入商订单号 | orderNo | 否 |　String | 201804211320 |<br> 明付平台流水号 | tradeSerial | 否 | String | P901283232343434 |<br> 三方平台流水号 | thirdTradeNo | 否 | String | 40092182888812121 |  </p>
</li>
</ul>
<h2 id="订单退款接口"><a href="#订单退款接口" class="headerlink" title="订单退款接口"></a>订单退款接口</h2><ul>
<li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/refundment" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/refundment</a><br> 默认版本号 1.0 ，退货要求必须传refundNo,因为可以一票多退，防止重退，该字段接入商户必须保证唯一。参考生成规则orderNo-上笔退款平台订单号</p>
</li>
<li><p>参数列表 </p>
<p> 字段名  | 变量名 | 必填 | 类型 | 示例值 |　描述<br>——–| —– | —–|——| —– | —<br>渠道号  |channelId | 是 |　String | 1000 |<br>门店编号 | storeNo | 是 | String | 100085 |<br>设备编号 | posNo | 是 |　String | 100 | 动态码设备列表区间100~119<br>收银员编号 | cashierNo | 否 | String | 02 |<br>许可列号 | serierNo | 否 | String | fe2323df999 | 动态码请忽略<br>退款金额 | amount | 是 | int | 12 | 单位（分）<br>接入商原订单号 | oriOrderNo |　 否　  |  String | 201804211320|<br>接入商退款订单号 | orderNo |　 否　  |  String | 201804211320| 接入商不传，默认平台退单号<br>接入商退款唯一订单号 | refundNo |　 是　  |  String | 1712010027-P03936456117297483776| 接入商唯一，退单号<br>明付商户原订单号 | TradeNo | 是 | String | P982127777712 | oriOrderNo ,oriTradeNo 二选一，oriTradeNo<br>支付类型 |　payType | 否 |  String  | WX_NATIVE | WX_NATIVE(微信）,ALI_NATIVE（支付宝）<br>退货商品详情 | goodsDetail | 否  |  String |  |  [{“goodsId”:”id0”,”goodsName”:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName”:”iname”,”price”:3,”quantity”:2}]<br>退单时间 | beginTime | 是 | String  | 20180504123546 | yyyyMMddHHmmss<br> IP地址 | ip | 是|  String | 127.0.0.1 |<br> 备注 | comment |　否 |  String |  |<br> 签名 |　sign | 是 |   String | | 非空参数按ASCII 排序，末尾增加明付平台分配的KEY  </p>
</li>
<li><p>返回结果 </p>
<p>   字段名  | 变量名 | 必填 | 类型 | 示例值 |　描述<br>  ——–| —– | —–|——| —– | —<br>  原单支付金额  |oriPayMoney | 否 |　int | 1000 |  单位（分），只有查询退款时，该值才有意义<br>  退款时，原单剩余可退金额 | oriSurplusMoney | 否 | int  | 1000 |  单位（分），只有查询退款时，该值才有意义<br>  退款时 ，原单接入商订单号 | oriOrderNo | 否 |　String | 201804211320 |<br>  退款时，原单明付平台流水号 | oriTradeSerial | 否 | String | P901283232343434 |<br>  退款时，原单三方平台流水号 | oriThirdTradeNo | 否 | String | 40092182888812121 |<br>  总支付金额 | needPayMoney |　 是　  |  int | 1000 | 终端发起的待付金额  needPayMoney=payMoney+thirdDiscountMoney+discountMoney+merchantDiscountMoney<br>  用户支付金额 | payMoney |　 是　  |  int | 1000 | 用户支付金额<br>  第三方优惠金额 | thirdDiscountMoney |　 否　  |  int | 1000 | 第三方优惠金额<br>  明付平台优惠金额 | discountMoney |　 否  |  int | 1000 | 明付平台优惠金额<br>  接入商优惠金额 | merchantDiscountMoney |　 否　  |  int | 1000 | 暂不支持<br>  交易时间 | tradeTime |　 是　  |  String | 20180504123546 | yyyyMMddHHmmss<br>  接入商订单号 | orderNo | 否 |　String | 201804211320 |<br>  明付平台流水号 | tradeSerial | 否 | String | P901283232343434 |<br>  三方平台流水号 | thirdTradeNo | 否 | String | 40092182888812121 | </p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/09/payment/" data-id="cjgz9r05d0001sofy8iukal99" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2018/05/09/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/05/09/payment/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/05/09/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>