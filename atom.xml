<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>YuHeng</title>
  
  <subtitle>大道至简</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-05-14T03:30:06.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>彧衡</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>个人简历</title>
    <link href="http://yoursite.com/2018/05/13/resume/"/>
    <id>http://yoursite.com/2018/05/13/resume/</id>
    <published>2018-05-13T10:23:12.000Z</published>
    <updated>2018-05-14T03:30:06.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="联系方式"><a href="#联系方式" class="headerlink" title="联系方式"></a>联系方式</h1><ul><li>手机：13263369194 </li><li>邮箱：<a href="mailto:hailianglone@gmail.com" target="_blank" rel="noopener">hailianglone@gmail.com</a>,<a href="mailto:hailianglong@126.com" target="_blank" rel="noopener">hailianglong@126.com</a></li><li>QQ: 317824594 </li><li>简历线上版：<a href="http://yuhengzhang.cn/2018/05/13/resume" target="_blank" rel="noopener">http://yuhengzhang.cn/2018/05/13/resume</a></li></ul><a id="more"></a><h1 id="个人信息"><a href="#个人信息" class="headerlink" title="个人信息"></a>个人信息</h1><ul><li>张海亮／男／1985 </li><li>本科／河北大学（数学与计算机系） </li><li>工作年限： 9年 </li><li>工作经历：1年J2ME方向，4年Android方向，4年JavaWeb方向</li><li>技术博客： <a href="http://yuhengzhang.cn" target="_blank" rel="noopener">http://yuhengzhang.cn</a> (很汗颜，刚搭建) </li><li>GitHub： <a href="http://github.com/hailianglone" target="_blank" rel="noopener">http://github.com/hailianglone</a></li><li>期望职位 ：web高级研发工程师，系统架构师</li><li>期望薪资：税前月薪不低于35K， 税前年薪45w，期权或股份特别的可例外</li><li>期望城市：北京 </li></ul><h1 id="工作经历"><a href="#工作经历" class="headerlink" title="工作经历"></a>工作经历</h1><h2 id="北京新锐友信软件技术有限公司（2013年5月～至今）"><a href="#北京新锐友信软件技术有限公司（2013年5月～至今）" class="headerlink" title="北京新锐友信软件技术有限公司（2013年5月～至今）"></a>北京新锐友信软件技术有限公司（2013年5月～至今）</h2><p><strong>职位</strong>：技术合伙人  </p><h3 id="产品"><a href="#产品" class="headerlink" title="产品"></a>产品</h3><h4 id="聚合支付（明付平台）-web"><a href="#聚合支付（明付平台）-web" class="headerlink" title="聚合支付（明付平台）(web)"></a>聚合支付（明付平台）(web)</h4><p>明付平台是集支付宝，微信，京东，翼支付，银联二维码等平台之上的三方支付服务商平台，旨在帮助企业迅速便捷的接入相关支付的开放平台，目前SDK已开放的支付包含： </p><ul><li>一码付（商户提供一个二维码付款码，同时支持用户微信和支付宝主扫发起的支付） </li><li>刷卡付 （用户出示手机App钱包付款码，由商户主扫发起的支付，目前支持微信，支付宝，京东，翼支付，银联二维码，和包支付）</li><li>微信公众号支付</li><li>微信小程序支付</li><li>微信动态码支付</li></ul><p>目前已接入商户列表： </p><ul><li>北京华联综超（对应门店62家）</li><li>柏溪商贸 </li><li>萌优集 </li><li>华联西安skp (马上接入) </li></ul><p>该平台服务端架构设计，研发，部署运维，基本是本人一人负责，目前日流水600w，订单量100w单，SDK还未已开放方式发布。 </p><h4 id="小咖停车-web-and-android"><a href="#小咖停车-web-and-android" class="headerlink" title="小咖停车(web and android)"></a>小咖停车(web and android)</h4><p>小咖停车是基于简单IOT蓝牙通信技术，通过App和智能地锁的配合，用来解决停车难的问题，产品本来定位的写字楼和附近小区的错时停车，目前由于小区物业，居委会等等一系列问题，正在尝试海外日本市场，国内已接入小区和写字楼：</p><ul><li>牡丹园西里</li><li>知春路荣上居</li><li>有研院 </li><li>首钢停运（大洋路市场，暂未对外开放）</li><li>日本福冈（洽谈中）</li></ul><p>该平台服务端和Android客户端设计与研发基本由本人一人负责。</p><p>下载链接：<a href="http://www.360park.com.cn" target="_blank" rel="noopener">http://www.360park.com.cn</a></p><h4 id="零钱彩-web"><a href="#零钱彩-web" class="headerlink" title="零钱彩(web)"></a>零钱彩(web)</h4><p>零钱彩是彩票和零售的一种结合创新，目前已在<strong>华联部分超市</strong>试运营，由于本产品主属兄弟公司，业务和模式上暂处保密状态，不便多说。</p><p>本平台第一版本服务器端是本人一人进行设计和研发，目前该产品已获PreA融资。</p><p>小程序版：<img src="http://p8kn4m8eo.bkt.clouddn.com/gh_a4133787fd71_258.jpg" alt="微分投"></p><h3 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h3><p>北京华联是我们主要的客户，目前为华联提供的服务有：</p><ul><li>pos 收银 </li><li>posserver 收银服务端</li><li>crm </li><li>支付</li><li>公众号</li><li>自助购</li></ul><h4 id="北京华联CRM系统-web"><a href="#北京华联CRM系统-web" class="headerlink" title="北京华联CRM系统(web)"></a>北京华联CRM系统(web)</h4><p>北京华联crm系统是针对华联信息系统整个闭环系统中关于会员系统的解决方案，零售行业的会员系统是所有crm系统中最为复杂的，已实现主要功能列表如下：</p><ul><li>组织机构和门店管理 </li><li>员工管理，菜单管理和角色权限管理 </li><li>基础设置（俱乐部设置，积分权益设置，销售权益设置，支付权益设置）</li><li>积分返利，积分抵现，积分返礼</li><li>促销管理（折扣促销，优惠券促销，积分促销）</li><li>会员卡服务台</li><li>办卡自动化处理</li><li>简单审批</li><li>报表系统</li></ul><p>该系统研发团队3人，本人主要负责项目跟踪和实施，以及对接基础设置模块和促销管理模块，为pos系统提供crm核心api接口实现。 </p><h4 id="北京华联公众号系统（web"><a href="#北京华联公众号系统（web" class="headerlink" title="北京华联公众号系统（web)"></a>北京华联公众号系统（web)</h4><p>华联公众号系统是华联为了集中管理各个地区公众号营销以及电子会员管理而定制的公众号系统开发，系统功能列表：</p><ul><li>粉丝自动划分地区</li><li>分地区设置海报，本地特色，热销榜单，自由品牌，每月上新</li><li>电子会员</li><li>会员课堂</li><li>BHG服务（电子发票，会员权益，附近门店，意见反馈，常见问题）</li><li>分地区招聘设置</li></ul><p>该系统需求和服务端设计，研发及部署运维，本人一人负责。</p><h4 id="国安盒子触控遥控器-android"><a href="#国安盒子触控遥控器-android" class="headerlink" title="国安盒子触控遥控器(android)"></a>国安盒子触控遥控器(android)</h4><p>本系统是另一个初创团队的项目，一期主要本人负责和带队，遥控器广州地区一小批量量产，该遥控器是基于android原生系统定制，不同于目前市场上的智能遥控器，触控遥控器的本质是反向了小屏投大屏的模式，它是把电视屏幕投到遥控器屏幕附带红外控制功能，投屏模式分为<strong>镜像同屏</strong>和<strong>重绘同屏</strong>模式，系统架构为了后来要做平台的需求，架构设计如下：</p><p><img src="http://p8kn4m8eo.bkt.clouddn.com/uremote.jpg" alt="uremote"></p><h4 id="其它项目"><a href="#其它项目" class="headerlink" title="其它项目"></a>其它项目</h4><ul><li>优驾行（陕西优驾行）(android)</li><li>掌中宝 （圣元国际）（web and android)</li><li>国网直升机调度系统（国家电网）（web)</li><li>烤圈（海尔）（android)</li><li>黄金60s（外包，湖南卫视）（android)</li><li>宝宝讲故事（外包，金和）（android)</li><li>微视（外包，cctv)（android)  </li></ul><h2 id="中科创达科技股份有限公司（2011年9月～2013年5月）"><a href="#中科创达科技股份有限公司（2011年9月～2013年5月）" class="headerlink" title="中科创达科技股份有限公司（2011年9月～2013年5月）"></a>中科创达科技股份有限公司（2011年9月～2013年5月）</h2><p><strong>职位</strong>：subleader </p><h3 id="展讯8810，6810等项目（抱歉有些实在记不清楚了）"><a href="#展讯8810，6810等项目（抱歉有些实在记不清楚了）" class="headerlink" title="展讯8810，6810等项目（抱歉有些实在记不清楚了）"></a>展讯8810，6810等项目（抱歉有些实在记不清楚了）</h3><p>本人主要担任app小组subleader,团队4～6人，主负责模块：</p><ul><li>Contacts （联系人）</li><li>Launcher（主界面）</li><li>LockScreen （锁屏）</li><li>Setting （设置）</li><li>QuickSearchBox（搜索）</li><li>InputMethod（输入法）</li></ul><h2 id="北京捷通华声（2009年9月～2011年9月）"><a href="#北京捷通华声（2009年9月～2011年9月）" class="headerlink" title="北京捷通华声（2009年9月～2011年9月）"></a>北京捷通华声（2009年9月～2011年9月）</h2><p><strong>职位</strong>：研发工程师 </p><h3 id="天行输入法"><a href="#天行输入法" class="headerlink" title="天行输入法"></a>天行输入法</h3><p>主打手写输入，支持全屏手写，窗口书写，字体支持颜色设置，大小设置，简繁体设置以及毛笔等格式设置，以及更牛逼的行识别。当然手写识别和语音识别是公司核心，该部分都在公司研发总监手上，我们是so库方式集成接入。</p><h3 id="其它项目-1"><a href="#其它项目-1" class="headerlink" title="其它项目"></a>其它项目</h3><p>J2ME 相关，诺基亚N71（塞班系统）的时代了。 </p><h1 id="开源项目和作品"><a href="#开源项目和作品" class="headerlink" title="开源项目和作品"></a>开源项目和作品</h1><p>初创团队，你懂得，除了工作基本都没有思考的时间，只是短暂参与过<strong>iBase4j </strong>的项目，除了提了问题和提供swagger-ui支持，基本没有参与过什么。</p><p><a href="https://gitee.com/iBase4J/iBase4J" target="_blank" rel="noopener">https://gitee.com/iBase4J/iBase4J</a> </p><p><strong>注</strong>：以上所有web项目基本架构都是：  spring/springmvc+mybatis+mysql/oracle+redis+shiro+swagger+fastdfs+nginx+tomcat</p><ul><li>数据库支持读写分离</li><li>nginx做反向代理和负载均衡</li><li>swagger在线接口文档输出</li><li>shiro 权限管理</li><li>redis 缓存服务器和session共享</li><li>shardingjdbc/mycat 两种分库分表方案（暂时没有用到哦）</li><li>fastdfs 文件和图片服务器</li></ul><h1 id="技能清单"><a href="#技能清单" class="headerlink" title="技能清单"></a>技能清单</h1><ul><li>Web开发：spring/springmvc/mybatis/hibernate/jpa/mysql/oracle/sqlite/redis（熟悉），structs/springboot/ejb/python/nosql/nodejs（了解）</li><li>Web前端：jsp（熟悉），jquery/vue/argularjs（了解），react（知道有）</li><li>版本管理，文档和自动化部署工具：/cvs/svn/git/jenkins/redmine（熟悉），docker（了解）</li><li>包管理：/ant/maven/gradle（熟悉）, npm/yarn（前端了解）</li><li>单元测试：junit </li><li>文件存储：/ftp/fastdfs （熟悉）</li><li>Linux  常用命令</li><li>Web容器：/nginx/tomcat（熟悉），weblogic/jetty （了解）</li><li>Android：app/framework </li><li>云和开放平台：阿里云/腾讯云/ecs/oss/rds，七牛云，亚马逊云（马上要），/微信支付平台/微信公众平台/微信开放平台/蚂蚁金服开放平台／微博开放平台／腾讯开放平台／科大讯飞语音云／容联云短信／友盟统计／极光推送／环信通信／TestIn测试平台／银联开放平台／京东金融开放平台／电信翼支付开放平台／，openfire(了解)</li><li>分布式与大数据：dubbo/zookeeper/hadoop/spark/storm等（本人只是略知，毕竟目前实际项目未用到）</li><li>常用传输数据结构：/xml/json/protobuf</li></ul><p><strong>注</strong>：初创团队兼任scm和运维部署，负责/redmine/gitlab/jenkins/svn等服务搭建，以及产品和项目发布。</p><h1 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h1><p>感谢您花时间阅读我的简历，期待有机会与您一起共事。</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;联系方式&quot;&gt;&lt;a href=&quot;#联系方式&quot; class=&quot;headerlink&quot; title=&quot;联系方式&quot;&gt;&lt;/a&gt;联系方式&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;手机：13263369194 &lt;/li&gt;
&lt;li&gt;邮箱：&lt;a href=&quot;mailto:hailianglone@gmail.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;hailianglone@gmail.com&lt;/a&gt;,&lt;a href=&quot;mailto:hailianglong@126.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;hailianglong@126.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;QQ: 317824594 &lt;/li&gt;
&lt;li&gt;简历线上版：&lt;a href=&quot;http://yuhengzhang.cn/2018/05/13/resume&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://yuhengzhang.cn/2018/05/13/resume&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="随笔" scheme="http://yoursite.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="关于我" scheme="http://yoursite.com/tags/%E5%85%B3%E4%BA%8E%E6%88%91/"/>
    
  </entry>
  
  <entry>
    <title>知识点</title>
    <link href="http://yoursite.com/2018/05/13/kownledge/"/>
    <id>http://yoursite.com/2018/05/13/kownledge/</id>
    <published>2018-05-13T07:22:10.000Z</published>
    <updated>2018-05-14T11:20:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="mac-拼音选择框不见？"><a href="#mac-拼音选择框不见？" class="headerlink" title="mac 拼音选择框不见？"></a>mac 拼音选择框不见？</h1><p>打开 Terminal （命令行），输入下面，回车即可。 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill -f SCIM.app</span><br></pre></td></tr></table></figure><h1 id="Linux-下Tomcat-deploy-阻塞在INFO-Deploying-web-application-directory-…"><a href="#Linux-下Tomcat-deploy-阻塞在INFO-Deploying-web-application-directory-…" class="headerlink" title="Linux 下Tomcat deploy 阻塞在INFO: Deploying web application directory ….?"></a>Linux 下Tomcat deploy 阻塞在INFO: Deploying web application directory ….?</h1><p>linux 或者部分unix系统提供随机数设备是/dev/random和/dev/urandom，两个区别是，random安全性高，</p><p>生成随机数时间间隔有点长，jdk默认random.</p><p>修改$JAVA_HOME/jre/lib/security/java.security文件，替换securerandom.source=file:/dev/random/为secureradom.source=file:/dev/./urandom    </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;mac-拼音选择框不见？&quot;&gt;&lt;a href=&quot;#mac-拼音选择框不见？&quot; class=&quot;headerlink&quot; title=&quot;mac 拼音选择框不见？&quot;&gt;&lt;/a&gt;mac 拼音选择框不见？&lt;/h1&gt;&lt;p&gt;打开 Terminal （命令行），输入下面，回车即可。 &lt;
      
    
    </summary>
    
      <category term="经验" scheme="http://yoursite.com/categories/%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="知识点" scheme="http://yoursite.com/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
  </entry>
  
  <entry>
    <title>Hexo搭建全教程（一）</title>
    <link href="http://yoursite.com/2018/05/10/hexo_1/"/>
    <id>http://yoursite.com/2018/05/10/hexo_1/</id>
    <published>2018-05-10T14:10:34.000Z</published>
    <updated>2018-05-13T10:41:13.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><blockquote><p>心血来潮，搭建个博客玩玩，看了网上很多教程，有些很全面，我也是参照大家的基本一气呵成，呈现给大家现在的这个样子，但是迫于好奇心，总想知道那些奇奇怪怪的命令到底是什么？于是有了本系列教程的第一部分。 </p></blockquote><a id="more"></a><h1 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h1><ul><li>hexo: 基于nodejs的博客框架  </li><li>next: hexo 主题 </li><li>github: 不解释 </li><li>nodejs: javascript运行环境  </li><li></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;引言&quot;&gt;&lt;a href=&quot;#引言&quot; class=&quot;headerlink&quot; title=&quot;引言&quot;&gt;&lt;/a&gt;引言&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;心血来潮，搭建个博客玩玩，看了网上很多教程，有些很全面，我也是参照大家的基本一气呵成，呈现给大家现在的这个样子，但是迫于好奇心，总想知道那些奇奇怪怪的命令到底是什么？于是有了本系列教程的第一部分。 &lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="经验" scheme="http://yoursite.com/categories/%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="hexo" scheme="http://yoursite.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>公众号支付</title>
    <link href="http://yoursite.com/2018/05/09/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%AF%E4%BB%98/"/>
    <id>http://yoursite.com/2018/05/09/公众号支付/</id>
    <published>2018-05-09T15:44:13.000Z</published>
    <updated>2018-05-11T10:35:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="公众号支付"><a href="#公众号支付" class="headerlink" title="公众号支付"></a>公众号支付</h1><p>公众号支付，是渠道商通过微信公众号中的页面发起的线上支付场景<br><a id="more"></a><br>渠道接入商接入流程： </p><ul><li><p>明付平台分配给渠道商，对应的渠道号，虚拟门店号，款台号（门店号，款台号根据接入商对账要求和接入商一起定义规则） </p></li><li><p>接入商调用明付平台【下单】接口，取得对应公众号发起支付的参数列表</p></li><li><p>接入商调起支付接口，根据支付返回码确认支付状态，如果异常情况下，请调用查询接口确认支付状态</p></li><li><p>如果接入商有退款需求，可根据平台订单号进行【退款】操作 </p></li></ul><p><strong>注意</strong> 暂时不支持支付通知处理 </p><h2 id="下单生成公众号支付参数接口"><a href="#下单生成公众号支付参数接口" class="headerlink" title="下单生成公众号支付参数接口"></a>下单生成公众号支付参数接口</h2><ul><li><p>接口地址： 沙箱：<a href="https://realer.cn/api/payService/{version}/unifiedOrder" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/unifiedOrder</a><br>  默认版本号 1.0</p></li><li><p>参数列表  </p></li></ul><style>table th:nth-of-type(1){width: 10%;}table th:nth-of-type(2){width: 10%;}table th:nth-of-type(3){width: 10%;}table th:nth-of-type(4){width: 10%;}table th:nth-of-type(5){width: 30%;}table th:nth-of-type(6){width: 30%;}</style><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>用户ID</td><td>openId</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td>动态码请忽略</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>1290012</td><td>接入商不传，默认平台订单号</td></tr><tr><td>订单金额</td><td>amount</td><td>是</td><td>int</td><td>12</td><td>单位（分）</td></tr><tr><td>订单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>支付类型</td><td>payType</td><td>是</td><td>String</td><td>WX_NATIVE</td><td>WX_PUBLIC</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>币种</td><td>currency</td><td>否</td><td>String</td><td>CNY</td><td></td></tr><tr><td>商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果  </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>应用ID</td><td>appId</td><td>否</td><td>String</td><td>wxd678efh567hg6787</td><td></td></tr><tr><td>时间戳</td><td>timeStamp</td><td>否</td><td>String</td><td>20180504123546</td><td></td></tr><tr><td>随机串</td><td>nonceStr</td><td>否</td><td>String</td><td>wxd678efh567hg6787fsdfsd2</td><td>随机串</td></tr><tr><td>数据包</td><td>package</td><td>否</td><td>String</td><td>prepay_id<br>=wx2017033010242291<br>fcfe0db70013231072</td><td>统一下单接口返回的 prepay_id 参数值，<br>提交格式如：prepay_id<br>=wx2017033010242291fcfe0db70013231072</td></tr><tr><td>签名方式</td><td>signType</td><td>否</td><td>String</td><td>MD5</td><td>签名类型，默认为MD5，<br>支持HMAC-SHA256和MD5。<br>注意此处需与统一下单的签名类型一致</td></tr><tr><td>签名</td><td>paySign</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td></td></tr><tr><td>明付平台订单号</td><td>tradeNo</td><td>是</td><td>String</td><td>P98212781821288121</td><td></td></tr><tr><td>第三方平台订单</td><td>outTradeNo</td><td>否</td><td>String</td><td>4001220181230456245</td><td></td></tr><tr><td>二维码URL</td><td>codeUrl</td><td>是</td><td>String</td><td>weixin://123.12121</td><td><strong>动态码关注字段</strong></td></tr></tbody></table><h2 id="订单查询接口"><a href="#订单查询接口" class="headerlink" title="订单查询接口"></a>订单查询接口</h2><p>仅仅支持明付订单号查询 </p><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/tradePayQuery" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/tradePayQuery</a><br>  默认版本号 1.0 </p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td></td></tr><tr><td>明付商户订单号</td><td>tradeNo</td><td>是</td><td>String</td><td>1290012</td><td>orderNo ,tradeNo 二选一，优先tradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td></tr></tbody></table><h2 id="订单退款接口"><a href="#订单退款接口" class="headerlink" title="订单退款接口"></a>订单退款接口</h2><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/refundment" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/refundment</a><br>   默认版本号 1.0 ，退货要求必须传refundNo,因为可以一票多退，防止重退，该字段接入商户必须保证唯一。参考生成规则orderNo-上笔退款平台订单号</p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td>动态码设备列表区间100~119</td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>退款金额</td><td>amount</td><td>是</td><td>int</td><td>12</td><td>单位（分）</td></tr><tr><td>接入商原订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>接入商退款订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td>接入商不传，默认平台退单号</td></tr><tr><td>接入商退款唯一订单号</td><td>refundNo</td><td>是</td><td>String</td><td>1712010027-P03936456117297483776</td><td>接入商唯一，退单号</td></tr><tr><td>明付商户原订单号</td><td>TradeNo</td><td>是</td><td>String</td><td>P982127777712</td><td>oriOrderNo ,oriTradeNo 二选一，oriTradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>退货商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>退单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;公众号支付&quot;&gt;&lt;a href=&quot;#公众号支付&quot; class=&quot;headerlink&quot; title=&quot;公众号支付&quot;&gt;&lt;/a&gt;公众号支付&lt;/h1&gt;&lt;p&gt;公众号支付，是渠道商通过微信公众号中的页面发起的线上支付场景&lt;br&gt;
    
    </summary>
    
      <category term="接口文档" scheme="http://yoursite.com/categories/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/"/>
    
    
      <category term="支付" scheme="http://yoursite.com/tags/%E6%94%AF%E4%BB%98/"/>
    
      <category term="动态码" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>刷卡付</title>
    <link href="http://yoursite.com/2018/05/09/%E5%88%B7%E5%8D%A1%E6%94%AF%E4%BB%98/"/>
    <id>http://yoursite.com/2018/05/09/刷卡支付/</id>
    <published>2018-05-09T15:44:13.000Z</published>
    <updated>2018-05-11T15:53:02.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="刷卡支付"><a href="#刷卡支付" class="headerlink" title="刷卡支付"></a>刷卡支付</h1><p>刷卡支付，是接入渠道商通过pos款台，扫用户支付码的支付场景<br><a id="more"></a><br>渠道接入商接入流程： </p><ul><li><p>明付平台分配给渠道商，对应的渠道号，虚拟门店号，款台号（门店号，款台号根据接入商对账要求和接入商一起定义规则） </p></li><li><p>接入商调用明付平台【设备接入】接口，取得对应支付授权码</p></li><li><p>接入商调用明付平台 【授权码支付】接口，进行支付</p></li><li><p>如果接入商有退款需求，可根据平台订单号进行【退款】操作 </p></li></ul><h2 id="设备接入"><a href="#设备接入" class="headerlink" title="设备接入"></a>设备接入</h2><ul><li><p>接口地址： 沙箱：<a href="https://realer.cn/api/payService/{version}/device/checkIn" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/device/checkIn</a><br>  默认版本号 1.0</p></li><li><p>参数列表  </p></li></ul><style>table th:nth-of-type(1){width: 10%;}table th:nth-of-type(2){width: 10%;}table th:nth-of-type(3){width: 10%;}table th:nth-of-type(4){width: 10%;}table th:nth-of-type(5){width: 30%;}table th:nth-of-type(6){width: 30%;}</style><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果  </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>授权码</td><td>licenceNo</td><td>是</td><td>String</td><td>4ef234239ioiwejq</td></tr></tbody></table><h2 id="刷卡支付接口"><a href="#刷卡支付接口" class="headerlink" title="刷卡支付接口"></a>刷卡支付接口</h2><ul><li>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/userPayCode" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/userPayCode</a><ul><li>version 1.0 : 同步请求方式 </li><li>version 2.0 : 异步请求方式，需要客户端主动发起轮询</li></ul></li><li>参数列表 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>授权码</td><td>serierNo</td><td>是</td><td>String</td><td>4ef234239ioiwejq</td><td></td></tr><tr><td>支付授权码</td><td>token</td><td>是</td><td>String</td><td>扫码所得</td><td></td></tr><tr><td>金额</td><td>amount</td><td>是</td><td>int</td><td>10</td><td>单位（分）</td></tr><tr><td>订单号</td><td>orderNo</td><td>是</td><td>String</td><td>接入商订单号</td><td></td></tr><tr><td>订单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180509123456</td><td>yyyyMMddHHmmss</td></tr><tr><td>支付类型</td><td>payType</td><td>是</td><td>String</td><td>WX_F2F,ALI_F2F,JD_F2F</td><td></td></tr><tr><td>ip</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>是</td><td>String</td><td>80</td><td></td></tr><tr><td>币种</td><td>currency</td><td>否</td><td>String</td><td>CNY</td><td></td></tr><tr><td>商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>备注</td><td>comment</td><td>是</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td></tr></tbody></table><h2 id="订单查询接口"><a href="#订单查询接口" class="headerlink" title="订单查询接口"></a>订单查询接口</h2><p>仅仅支持明付订单号查询 </p><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/tradePayQuery" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/tradePayQuery</a><br>  默认版本号 1.0 </p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td></td></tr><tr><td>明付商户订单号</td><td>tradeNo</td><td>是</td><td>String</td><td>1290012</td><td>orderNo ,tradeNo 二选一，优先tradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td></tr></tbody></table><h2 id="订单退款接口"><a href="#订单退款接口" class="headerlink" title="订单退款接口"></a>订单退款接口</h2><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/refundment" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/refundment</a><br>   默认版本号 1.0 ，退货要求必须传refundNo,因为可以一票多退，防止重退，该字段接入商户必须保证唯一。参考生成规则orderNo-上笔退款平台订单号</p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td>动态码设备列表区间100~119</td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>退款金额</td><td>amount</td><td>是</td><td>int</td><td>12</td><td>单位（分）</td></tr><tr><td>接入商原订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>接入商退款订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td>接入商不传，默认平台退单号</td></tr><tr><td>接入商退款唯一订单号</td><td>refundNo</td><td>是</td><td>String</td><td>1712010027-P03936456117297483776</td><td>接入商唯一，退单号</td></tr><tr><td>明付商户原订单号</td><td>TradeNo</td><td>是</td><td>String</td><td>P982127777712</td><td>oriOrderNo ,oriTradeNo 二选一，oriTradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>退货商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>退单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;刷卡支付&quot;&gt;&lt;a href=&quot;#刷卡支付&quot; class=&quot;headerlink&quot; title=&quot;刷卡支付&quot;&gt;&lt;/a&gt;刷卡支付&lt;/h1&gt;&lt;p&gt;刷卡支付，是接入渠道商通过pos款台，扫用户支付码的支付场景&lt;br&gt;
    
    </summary>
    
      <category term="接口文档" scheme="http://yoursite.com/categories/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/"/>
    
    
      <category term="支付" scheme="http://yoursite.com/tags/%E6%94%AF%E4%BB%98/"/>
    
      <category term="刷卡付" scheme="http://yoursite.com/tags/%E5%88%B7%E5%8D%A1%E4%BB%98/"/>
    
  </entry>
  
  <entry>
    <title>动态码支付</title>
    <link href="http://yoursite.com/2018/05/09/%E5%8A%A8%E6%80%81%E7%A0%81%E6%94%AF%E4%BB%98/"/>
    <id>http://yoursite.com/2018/05/09/动态码支付/</id>
    <published>2018-05-09T15:44:13.000Z</published>
    <updated>2018-05-11T09:28:35.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="动态码支付"><a href="#动态码支付" class="headerlink" title="动态码支付"></a>动态码支付</h1><p>动态码支付，是渠道商根据用户订单生成对应支付二维码，用户打开支付宝或者微信扫一扫功能，进行扫码支付。<br><a id="more"></a><br>渠道接入商接入流程： </p><ul><li><p>明付平台分配给渠道商，对应的渠道号，虚拟门店号，款台号（门店号，款台号根据接入商对账要求和接入商一起定义规则） </p></li><li><p>接入商调用明付平台【下单】接口，取得对应支付二维码链接和对应平台订单号 </p></li><li><p>接入商同时发起轮询【查询】接口，轮询间隔3~5,轮询5次，如果仍然没有收到支付确认，请重新【下单】刷新二维码，并提示用户重新扫码支付 </p></li><li><p>如果接入商有退款需求，可根据平台订单号进行【退款】操作 </p></li></ul><p><strong>注意</strong> 暂时不支持支付通知处理 </p><h2 id="下单生成二维码接口"><a href="#下单生成二维码接口" class="headerlink" title="下单生成二维码接口"></a>下单生成二维码接口</h2><ul><li><p>接口地址： 沙箱：<a href="https://realer.cn/api/payService/{version}/unifiedOrder" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/unifiedOrder</a><br>  默认版本号 1.0</p></li><li><p>参数列表  </p></li></ul><style>table th:nth-of-type(1){width: 10%;}table th:nth-of-type(2){width: 10%;}table th:nth-of-type(3){width: 10%;}table th:nth-of-type(4){width: 10%;}table th:nth-of-type(5){width: 30%;}table th:nth-of-type(6){width: 30%;}</style><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>用户ID</td><td>openId</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td>动态码请忽略</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>1290012</td><td>接入商不传，默认平台订单号</td></tr><tr><td>订单金额</td><td>amount</td><td>是</td><td>int</td><td>12</td><td>单位（分）</td></tr><tr><td>订单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>支付类型</td><td>payType</td><td>是</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）<br>,ALI_NATIVE（支付宝）</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>币种</td><td>currency</td><td>否</td><td>String</td><td>CNY</td><td></td></tr><tr><td>商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果  </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>应用ID</td><td>appId</td><td>否</td><td>String</td><td>wxd678efh567hg6787</td><td></td></tr><tr><td>时间戳</td><td>timeStamp</td><td>否</td><td>String</td><td>20180504123546</td><td></td></tr><tr><td>随机串</td><td>nonceStr</td><td>否</td><td>String</td><td>wxd678efh567hg6787fsdfsd2</td><td>随机串</td></tr><tr><td>数据包</td><td>package</td><td>否</td><td>String</td><td>prepay_id<br>=wx2017033010242291<br>fcfe0db70013231072</td><td>统一下单接口返回的 prepay_id 参数值，<br>提交格式如：prepay_id<br>=wx2017033010242291fcfe0db70013231072</td></tr><tr><td>签名方式</td><td>signType</td><td>否</td><td>String</td><td>MD5</td><td>签名类型，默认为MD5，<br>支持HMAC-SHA256和MD5。<br>注意此处需与统一下单的签名类型一致</td></tr><tr><td>签名</td><td>paySign</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td></td></tr><tr><td>明付平台订单号</td><td>tradeNo</td><td>是</td><td>String</td><td>P98212781821288121</td><td></td></tr><tr><td>第三方平台订单</td><td>outTradeNo</td><td>否</td><td>String</td><td>4001220181230456245</td><td></td></tr><tr><td>二维码URL</td><td>codeUrl</td><td>是</td><td>String</td><td>weixin://123.12121</td><td><strong>动态码关注字段</strong></td></tr></tbody></table><h2 id="订单查询接口"><a href="#订单查询接口" class="headerlink" title="订单查询接口"></a>订单查询接口</h2><p>仅仅支持明付订单号查询 </p><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/tradePayQuery" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/tradePayQuery</a><br>  默认版本号 1.0 </p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td></td></tr><tr><td>明付商户订单号</td><td>tradeNo</td><td>是</td><td>String</td><td>1290012</td><td>orderNo ,tradeNo 二选一，优先tradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td></tr></tbody></table><h2 id="订单退款接口"><a href="#订单退款接口" class="headerlink" title="订单退款接口"></a>订单退款接口</h2><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/refundment" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/refundment</a><br>   默认版本号 1.0 ，退货要求必须传refundNo,因为可以一票多退，防止重退，该字段接入商户必须保证唯一。参考生成规则orderNo-上笔退款平台订单号</p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td>动态码设备列表区间100~119</td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>退款金额</td><td>amount</td><td>是</td><td>int</td><td>12</td><td>单位（分）</td></tr><tr><td>接入商原订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>接入商退款订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td>接入商不传，默认平台退单号</td></tr><tr><td>接入商退款唯一订单号</td><td>refundNo</td><td>是</td><td>String</td><td>1712010027-P03936456117297483776</td><td>接入商唯一，退单号</td></tr><tr><td>明付商户原订单号</td><td>TradeNo</td><td>是</td><td>String</td><td>P982127777712</td><td>oriOrderNo ,oriTradeNo 二选一，oriTradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>退货商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>退单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;动态码支付&quot;&gt;&lt;a href=&quot;#动态码支付&quot; class=&quot;headerlink&quot; title=&quot;动态码支付&quot;&gt;&lt;/a&gt;动态码支付&lt;/h1&gt;&lt;p&gt;动态码支付，是渠道商根据用户订单生成对应支付二维码，用户打开支付宝或者微信扫一扫功能，进行扫码支付。&lt;br&gt;
    
    </summary>
    
      <category term="接口文档" scheme="http://yoursite.com/categories/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/"/>
    
    
      <category term="支付" scheme="http://yoursite.com/tags/%E6%94%AF%E4%BB%98/"/>
    
      <category term="动态码" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E7%A0%81/"/>
    
  </entry>
  
</feed>
