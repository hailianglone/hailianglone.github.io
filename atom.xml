<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>YuHeng</title>
  
  <subtitle>大道至简</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-05-13T10:35:40.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>彧衡</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://yoursite.com/2018/05/13/resume/"/>
    <id>http://yoursite.com/2018/05/13/resume/</id>
    <published>2018-05-13T10:29:46.000Z</published>
    <updated>2018-05-13T10:35:40.000Z</updated>
    
    <content type="html"><![CDATA[<p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;

      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>知识点</title>
    <link href="http://yoursite.com/2018/05/13/kownledge/"/>
    <id>http://yoursite.com/2018/05/13/kownledge/</id>
    <published>2018-05-13T07:22:10.000Z</published>
    <updated>2018-05-13T10:35:08.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="mac-拼音选择框不见？"><a href="#mac-拼音选择框不见？" class="headerlink" title="mac 拼音选择框不见？"></a>mac 拼音选择框不见？</h1><p>打开 Terminal （命令行），输入下面，回车即可。 </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill -f SCIM.app</span><br></pre></td></tr></table></figure><p>​    </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;mac-拼音选择框不见？&quot;&gt;&lt;a href=&quot;#mac-拼音选择框不见？&quot; class=&quot;headerlink&quot; title=&quot;mac 拼音选择框不见？&quot;&gt;&lt;/a&gt;mac 拼音选择框不见？&lt;/h1&gt;&lt;p&gt;打开 Terminal （命令行），输入下面，回车即可。 &lt;
      
    
    </summary>
    
      <category term="经验" scheme="http://yoursite.com/categories/%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="知识点" scheme="http://yoursite.com/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
  </entry>
  
  <entry>
    <title>Hexo搭建全教程（一）</title>
    <link href="http://yoursite.com/2018/05/10/hexo_1/"/>
    <id>http://yoursite.com/2018/05/10/hexo_1/</id>
    <published>2018-05-10T14:10:34.000Z</published>
    <updated>2018-05-13T10:27:10.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><blockquote><p>心血来潮，搭建个博客玩玩，看了网上很多教程，有些很全面，我也是参照大家的基本一气呵成，呈现给大家现在的这个样子，但是迫于好奇心，总想知道那些奇奇怪怪的命令到底是什么？于是有了本系列教程的第一部分。 </p></blockquote><a id="more"></a><h1 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h1><ul><li>hexo: 基于nodejs的博客框架  </li><li>next: hexo 主题 </li><li>github: 不解释 </li><li>nodejs: javascript运行环境  </li><li></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;引言&quot;&gt;&lt;a href=&quot;#引言&quot; class=&quot;headerlink&quot; title=&quot;引言&quot;&gt;&lt;/a&gt;引言&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;心血来潮，搭建个博客玩玩，看了网上很多教程，有些很全面，我也是参照大家的基本一气呵成，呈现给大家现在的这个样子，但是迫于好奇心，总想知道那些奇奇怪怪的命令到底是什么？于是有了本系列教程的第一部分。 &lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="积木" scheme="http://yoursite.com/categories/%E7%A7%AF%E6%9C%A8/"/>
    
    
      <category term="hexo" scheme="http://yoursite.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>刷卡付</title>
    <link href="http://yoursite.com/2018/05/09/%E5%88%B7%E5%8D%A1%E6%94%AF%E4%BB%98/"/>
    <id>http://yoursite.com/2018/05/09/刷卡支付/</id>
    <published>2018-05-09T15:44:13.000Z</published>
    <updated>2018-05-11T15:53:02.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="刷卡支付"><a href="#刷卡支付" class="headerlink" title="刷卡支付"></a>刷卡支付</h1><p>刷卡支付，是接入渠道商通过pos款台，扫用户支付码的支付场景<br><a id="more"></a><br>渠道接入商接入流程： </p><ul><li><p>明付平台分配给渠道商，对应的渠道号，虚拟门店号，款台号（门店号，款台号根据接入商对账要求和接入商一起定义规则） </p></li><li><p>接入商调用明付平台【设备接入】接口，取得对应支付授权码</p></li><li><p>接入商调用明付平台 【授权码支付】接口，进行支付</p></li><li><p>如果接入商有退款需求，可根据平台订单号进行【退款】操作 </p></li></ul><h2 id="设备接入"><a href="#设备接入" class="headerlink" title="设备接入"></a>设备接入</h2><ul><li><p>接口地址： 沙箱：<a href="https://realer.cn/api/payService/{version}/device/checkIn" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/device/checkIn</a><br>  默认版本号 1.0</p></li><li><p>参数列表  </p></li></ul><style>table th:nth-of-type(1){width: 10%;}table th:nth-of-type(2){width: 10%;}table th:nth-of-type(3){width: 10%;}table th:nth-of-type(4){width: 10%;}table th:nth-of-type(5){width: 30%;}table th:nth-of-type(6){width: 30%;}</style><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果  </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>授权码</td><td>licenceNo</td><td>是</td><td>String</td><td>4ef234239ioiwejq</td></tr></tbody></table><h2 id="刷卡支付接口"><a href="#刷卡支付接口" class="headerlink" title="刷卡支付接口"></a>刷卡支付接口</h2><ul><li>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/userPayCode" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/userPayCode</a><ul><li>version 1.0 : 同步请求方式 </li><li>version 2.0 : 异步请求方式，需要客户端主动发起轮询</li></ul></li><li>参数列表 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>授权码</td><td>serierNo</td><td>是</td><td>String</td><td>4ef234239ioiwejq</td><td></td></tr><tr><td>支付授权码</td><td>token</td><td>是</td><td>String</td><td>扫码所得</td><td></td></tr><tr><td>金额</td><td>amount</td><td>是</td><td>int</td><td>10</td><td>单位（分）</td></tr><tr><td>订单号</td><td>orderNo</td><td>是</td><td>String</td><td>接入商订单号</td><td></td></tr><tr><td>订单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180509123456</td><td>yyyyMMddHHmmss</td></tr><tr><td>支付类型</td><td>payType</td><td>是</td><td>String</td><td>WX_F2F,ALI_F2F,JD_F2F</td><td></td></tr><tr><td>ip</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>是</td><td>String</td><td>80</td><td></td></tr><tr><td>币种</td><td>currency</td><td>否</td><td>String</td><td>CNY</td><td></td></tr><tr><td>商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>备注</td><td>comment</td><td>是</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td></tr></tbody></table><h2 id="订单查询接口"><a href="#订单查询接口" class="headerlink" title="订单查询接口"></a>订单查询接口</h2><p>仅仅支持明付订单号查询 </p><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/tradePayQuery" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/tradePayQuery</a><br>  默认版本号 1.0 </p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td></td></tr><tr><td>明付商户订单号</td><td>tradeNo</td><td>是</td><td>String</td><td>1290012</td><td>orderNo ,tradeNo 二选一，优先tradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td></tr></tbody></table><h2 id="订单退款接口"><a href="#订单退款接口" class="headerlink" title="订单退款接口"></a>订单退款接口</h2><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/refundment" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/refundment</a><br>   默认版本号 1.0 ，退货要求必须传refundNo,因为可以一票多退，防止重退，该字段接入商户必须保证唯一。参考生成规则orderNo-上笔退款平台订单号</p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td>动态码设备列表区间100~119</td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>退款金额</td><td>amount</td><td>是</td><td>int</td><td>12</td><td>单位（分）</td></tr><tr><td>接入商原订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>接入商退款订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td>接入商不传，默认平台退单号</td></tr><tr><td>接入商退款唯一订单号</td><td>refundNo</td><td>是</td><td>String</td><td>1712010027-P03936456117297483776</td><td>接入商唯一，退单号</td></tr><tr><td>明付商户原订单号</td><td>TradeNo</td><td>是</td><td>String</td><td>P982127777712</td><td>oriOrderNo ,oriTradeNo 二选一，oriTradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>退货商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>退单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;刷卡支付&quot;&gt;&lt;a href=&quot;#刷卡支付&quot; class=&quot;headerlink&quot; title=&quot;刷卡支付&quot;&gt;&lt;/a&gt;刷卡支付&lt;/h1&gt;&lt;p&gt;刷卡支付，是接入渠道商通过pos款台，扫用户支付码的支付场景&lt;br&gt;
    
    </summary>
    
      <category term="接口文档" scheme="http://yoursite.com/categories/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/"/>
    
    
      <category term="支付" scheme="http://yoursite.com/tags/%E6%94%AF%E4%BB%98/"/>
    
      <category term="刷卡付" scheme="http://yoursite.com/tags/%E5%88%B7%E5%8D%A1%E4%BB%98/"/>
    
  </entry>
  
  <entry>
    <title>公众号支付</title>
    <link href="http://yoursite.com/2018/05/09/%E5%85%AC%E4%BC%97%E5%8F%B7%E6%94%AF%E4%BB%98/"/>
    <id>http://yoursite.com/2018/05/09/公众号支付/</id>
    <published>2018-05-09T15:44:13.000Z</published>
    <updated>2018-05-11T10:35:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="公众号支付"><a href="#公众号支付" class="headerlink" title="公众号支付"></a>公众号支付</h1><p>公众号支付，是渠道商通过微信公众号中的页面发起的线上支付场景<br><a id="more"></a><br>渠道接入商接入流程： </p><ul><li><p>明付平台分配给渠道商，对应的渠道号，虚拟门店号，款台号（门店号，款台号根据接入商对账要求和接入商一起定义规则） </p></li><li><p>接入商调用明付平台【下单】接口，取得对应公众号发起支付的参数列表</p></li><li><p>接入商调起支付接口，根据支付返回码确认支付状态，如果异常情况下，请调用查询接口确认支付状态</p></li><li><p>如果接入商有退款需求，可根据平台订单号进行【退款】操作 </p></li></ul><p><strong>注意</strong> 暂时不支持支付通知处理 </p><h2 id="下单生成公众号支付参数接口"><a href="#下单生成公众号支付参数接口" class="headerlink" title="下单生成公众号支付参数接口"></a>下单生成公众号支付参数接口</h2><ul><li><p>接口地址： 沙箱：<a href="https://realer.cn/api/payService/{version}/unifiedOrder" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/unifiedOrder</a><br>  默认版本号 1.0</p></li><li><p>参数列表  </p></li></ul><style>table th:nth-of-type(1){width: 10%;}table th:nth-of-type(2){width: 10%;}table th:nth-of-type(3){width: 10%;}table th:nth-of-type(4){width: 10%;}table th:nth-of-type(5){width: 30%;}table th:nth-of-type(6){width: 30%;}</style><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>用户ID</td><td>openId</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td>动态码请忽略</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>1290012</td><td>接入商不传，默认平台订单号</td></tr><tr><td>订单金额</td><td>amount</td><td>是</td><td>int</td><td>12</td><td>单位（分）</td></tr><tr><td>订单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>支付类型</td><td>payType</td><td>是</td><td>String</td><td>WX_NATIVE</td><td>WX_PUBLIC</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>币种</td><td>currency</td><td>否</td><td>String</td><td>CNY</td><td></td></tr><tr><td>商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果  </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>应用ID</td><td>appId</td><td>否</td><td>String</td><td>wxd678efh567hg6787</td><td></td></tr><tr><td>时间戳</td><td>timeStamp</td><td>否</td><td>String</td><td>20180504123546</td><td></td></tr><tr><td>随机串</td><td>nonceStr</td><td>否</td><td>String</td><td>wxd678efh567hg6787fsdfsd2</td><td>随机串</td></tr><tr><td>数据包</td><td>package</td><td>否</td><td>String</td><td>prepay_id<br>=wx2017033010242291<br>fcfe0db70013231072</td><td>统一下单接口返回的 prepay_id 参数值，<br>提交格式如：prepay_id<br>=wx2017033010242291fcfe0db70013231072</td></tr><tr><td>签名方式</td><td>signType</td><td>否</td><td>String</td><td>MD5</td><td>签名类型，默认为MD5，<br>支持HMAC-SHA256和MD5。<br>注意此处需与统一下单的签名类型一致</td></tr><tr><td>签名</td><td>paySign</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td></td></tr><tr><td>明付平台订单号</td><td>tradeNo</td><td>是</td><td>String</td><td>P98212781821288121</td><td></td></tr><tr><td>第三方平台订单</td><td>outTradeNo</td><td>否</td><td>String</td><td>4001220181230456245</td><td></td></tr><tr><td>二维码URL</td><td>codeUrl</td><td>是</td><td>String</td><td>weixin://123.12121</td><td><strong>动态码关注字段</strong></td></tr></tbody></table><h2 id="订单查询接口"><a href="#订单查询接口" class="headerlink" title="订单查询接口"></a>订单查询接口</h2><p>仅仅支持明付订单号查询 </p><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/tradePayQuery" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/tradePayQuery</a><br>  默认版本号 1.0 </p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td></td></tr><tr><td>明付商户订单号</td><td>tradeNo</td><td>是</td><td>String</td><td>1290012</td><td>orderNo ,tradeNo 二选一，优先tradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td></tr></tbody></table><h2 id="订单退款接口"><a href="#订单退款接口" class="headerlink" title="订单退款接口"></a>订单退款接口</h2><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/refundment" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/refundment</a><br>   默认版本号 1.0 ，退货要求必须传refundNo,因为可以一票多退，防止重退，该字段接入商户必须保证唯一。参考生成规则orderNo-上笔退款平台订单号</p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td>动态码设备列表区间100~119</td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>退款金额</td><td>amount</td><td>是</td><td>int</td><td>12</td><td>单位（分）</td></tr><tr><td>接入商原订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>接入商退款订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td>接入商不传，默认平台退单号</td></tr><tr><td>接入商退款唯一订单号</td><td>refundNo</td><td>是</td><td>String</td><td>1712010027-P03936456117297483776</td><td>接入商唯一，退单号</td></tr><tr><td>明付商户原订单号</td><td>TradeNo</td><td>是</td><td>String</td><td>P982127777712</td><td>oriOrderNo ,oriTradeNo 二选一，oriTradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>退货商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>退单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;公众号支付&quot;&gt;&lt;a href=&quot;#公众号支付&quot; class=&quot;headerlink&quot; title=&quot;公众号支付&quot;&gt;&lt;/a&gt;公众号支付&lt;/h1&gt;&lt;p&gt;公众号支付，是渠道商通过微信公众号中的页面发起的线上支付场景&lt;br&gt;
    
    </summary>
    
      <category term="接口文档" scheme="http://yoursite.com/categories/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/"/>
    
    
      <category term="支付" scheme="http://yoursite.com/tags/%E6%94%AF%E4%BB%98/"/>
    
      <category term="动态码" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>动态码支付</title>
    <link href="http://yoursite.com/2018/05/09/%E5%8A%A8%E6%80%81%E7%A0%81%E6%94%AF%E4%BB%98/"/>
    <id>http://yoursite.com/2018/05/09/动态码支付/</id>
    <published>2018-05-09T15:44:13.000Z</published>
    <updated>2018-05-11T09:28:35.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="动态码支付"><a href="#动态码支付" class="headerlink" title="动态码支付"></a>动态码支付</h1><p>动态码支付，是渠道商根据用户订单生成对应支付二维码，用户打开支付宝或者微信扫一扫功能，进行扫码支付。<br><a id="more"></a><br>渠道接入商接入流程： </p><ul><li><p>明付平台分配给渠道商，对应的渠道号，虚拟门店号，款台号（门店号，款台号根据接入商对账要求和接入商一起定义规则） </p></li><li><p>接入商调用明付平台【下单】接口，取得对应支付二维码链接和对应平台订单号 </p></li><li><p>接入商同时发起轮询【查询】接口，轮询间隔3~5,轮询5次，如果仍然没有收到支付确认，请重新【下单】刷新二维码，并提示用户重新扫码支付 </p></li><li><p>如果接入商有退款需求，可根据平台订单号进行【退款】操作 </p></li></ul><p><strong>注意</strong> 暂时不支持支付通知处理 </p><h2 id="下单生成二维码接口"><a href="#下单生成二维码接口" class="headerlink" title="下单生成二维码接口"></a>下单生成二维码接口</h2><ul><li><p>接口地址： 沙箱：<a href="https://realer.cn/api/payService/{version}/unifiedOrder" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/unifiedOrder</a><br>  默认版本号 1.0</p></li><li><p>参数列表  </p></li></ul><style>table th:nth-of-type(1){width: 10%;}table th:nth-of-type(2){width: 10%;}table th:nth-of-type(3){width: 10%;}table th:nth-of-type(4){width: 10%;}table th:nth-of-type(5){width: 30%;}table th:nth-of-type(6){width: 30%;}</style><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>用户ID</td><td>openId</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td>动态码请忽略</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>1290012</td><td>接入商不传，默认平台订单号</td></tr><tr><td>订单金额</td><td>amount</td><td>是</td><td>int</td><td>12</td><td>单位（分）</td></tr><tr><td>订单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>支付类型</td><td>payType</td><td>是</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）<br>,ALI_NATIVE（支付宝）</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>币种</td><td>currency</td><td>否</td><td>String</td><td>CNY</td><td></td></tr><tr><td>商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果  </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>应用ID</td><td>appId</td><td>否</td><td>String</td><td>wxd678efh567hg6787</td><td></td></tr><tr><td>时间戳</td><td>timeStamp</td><td>否</td><td>String</td><td>20180504123546</td><td></td></tr><tr><td>随机串</td><td>nonceStr</td><td>否</td><td>String</td><td>wxd678efh567hg6787fsdfsd2</td><td>随机串</td></tr><tr><td>数据包</td><td>package</td><td>否</td><td>String</td><td>prepay_id<br>=wx2017033010242291<br>fcfe0db70013231072</td><td>统一下单接口返回的 prepay_id 参数值，<br>提交格式如：prepay_id<br>=wx2017033010242291fcfe0db70013231072</td></tr><tr><td>签名方式</td><td>signType</td><td>否</td><td>String</td><td>MD5</td><td>签名类型，默认为MD5，<br>支持HMAC-SHA256和MD5。<br>注意此处需与统一下单的签名类型一致</td></tr><tr><td>签名</td><td>paySign</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td></td></tr><tr><td>明付平台订单号</td><td>tradeNo</td><td>是</td><td>String</td><td>P98212781821288121</td><td></td></tr><tr><td>第三方平台订单</td><td>outTradeNo</td><td>否</td><td>String</td><td>4001220181230456245</td><td></td></tr><tr><td>二维码URL</td><td>codeUrl</td><td>是</td><td>String</td><td>weixin://123.12121</td><td><strong>动态码关注字段</strong></td></tr></tbody></table><h2 id="订单查询接口"><a href="#订单查询接口" class="headerlink" title="订单查询接口"></a>订单查询接口</h2><p>仅仅支持明付订单号查询 </p><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/tradePayQuery" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/tradePayQuery</a><br>  默认版本号 1.0 </p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td></td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>oG3werwerwer1221</td><td></td></tr><tr><td>明付商户订单号</td><td>tradeNo</td><td>是</td><td>String</td><td>1290012</td><td>orderNo ,tradeNo 二选一，优先tradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td></tr></tbody></table><h2 id="订单退款接口"><a href="#订单退款接口" class="headerlink" title="订单退款接口"></a>订单退款接口</h2><ul><li><p>接口地址： 沙箱： <a href="https://realer.cn/api/payService/{version}/refundment" target="_blank" rel="noopener">https://realer.cn/api/payService/{version}/refundment</a><br>   默认版本号 1.0 ，退货要求必须传refundNo,因为可以一票多退，防止重退，该字段接入商户必须保证唯一。参考生成规则orderNo-上笔退款平台订单号</p></li><li><p>参数列表 </p></li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>渠道号</td><td>channelId</td><td>是</td><td>String</td><td>1000</td><td></td></tr><tr><td>门店编号</td><td>storeNo</td><td>是</td><td>String</td><td>100085</td><td></td></tr><tr><td>设备编号</td><td>posNo</td><td>是</td><td>String</td><td>100</td><td>动态码设备列表区间100~119</td></tr><tr><td>收银员编号</td><td>cashierNo</td><td>否</td><td>String</td><td>02</td><td></td></tr><tr><td>许可列号</td><td>serierNo</td><td>否</td><td>String</td><td>fe2323df999</td><td>动态码请忽略</td></tr><tr><td>退款金额</td><td>amount</td><td>是</td><td>int</td><td>12</td><td>单位（分）</td></tr><tr><td>接入商原订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>接入商退款订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td>接入商不传，默认平台退单号</td></tr><tr><td>接入商退款唯一订单号</td><td>refundNo</td><td>是</td><td>String</td><td>1712010027-P03936456117297483776</td><td>接入商唯一，退单号</td></tr><tr><td>明付商户原订单号</td><td>TradeNo</td><td>是</td><td>String</td><td>P982127777712</td><td>oriOrderNo ,oriTradeNo 二选一，oriTradeNo</td></tr><tr><td>支付类型</td><td>payType</td><td>否</td><td>String</td><td>WX_NATIVE</td><td>WX_NATIVE(微信）,ALI_NATIVE（支付宝）</td></tr><tr><td>退货商品详情</td><td>goodsDetail</td><td>否</td><td>String</td><td></td><td>[{“goodsId”:”id0”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2},{“goodsId”:”id1”,”goodsName<br>“:”iname”,”price”:3,”quantity”:2}]</td></tr><tr><td>退单时间</td><td>beginTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>IP地址</td><td>ip</td><td>是</td><td>String</td><td>127.0.0.1</td><td></td></tr><tr><td>备注</td><td>comment</td><td>否</td><td>String</td><td></td><td></td></tr><tr><td>签名</td><td>sign</td><td>是</td><td>String</td><td></td><td>非空参数按ASCII 排序，<br>末尾增加明付平台分配的KEY</td></tr></tbody></table><ul><li>返回结果 </li></ul><table><thead><tr><th>字段名</th><th>变量名</th><th>必填</th><th>类型</th><th>示例值</th><th>描述</th></tr></thead><tbody><tr><td>原单支付金额</td><td>oriPayMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时，原单剩余可退金额</td><td>oriSurplusMoney</td><td>否</td><td>int</td><td>1000</td><td>单位（分），只有查询退款时，该值才有意义</td></tr><tr><td>退款时 ，原单接入商订单号</td><td>oriOrderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>退款时，原单明付平台流水号</td><td>oriTradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>退款时，原单三方平台流水号</td><td>oriThirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr><tr><td>总支付金额</td><td>needPayMoney</td><td>是</td><td>int</td><td>1000</td><td>终端发起的待付金额  needPayMoney=<br>payMoney<br>+thirdDiscountMoney<br>+discountMoney<br>+merchantDiscountMoney</td></tr><tr><td>用户支付金额</td><td>payMoney</td><td>是</td><td>int</td><td>1000</td><td>用户支付金额</td></tr><tr><td>第三方优惠金额</td><td>thirdDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>第三方优惠金额</td></tr><tr><td>明付平台优惠金额</td><td>discountMoney</td><td>否</td><td>int</td><td>1000</td><td>明付平台优惠金额</td></tr><tr><td>接入商优惠金额</td><td>merchantDiscountMoney</td><td>否</td><td>int</td><td>1000</td><td>暂不支持</td></tr><tr><td>交易时间</td><td>tradeTime</td><td>是</td><td>String</td><td>20180504123546</td><td>yyyyMMddHHmmss</td></tr><tr><td>接入商订单号</td><td>orderNo</td><td>否</td><td>String</td><td>201804211320</td><td></td></tr><tr><td>明付平台流水号</td><td>tradeSerial</td><td>否</td><td>String</td><td>P901283232343434</td><td></td></tr><tr><td>三方平台流水号</td><td>thirdTradeNo</td><td>否</td><td>String</td><td>40092182888812121</td><td></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;动态码支付&quot;&gt;&lt;a href=&quot;#动态码支付&quot; class=&quot;headerlink&quot; title=&quot;动态码支付&quot;&gt;&lt;/a&gt;动态码支付&lt;/h1&gt;&lt;p&gt;动态码支付，是渠道商根据用户订单生成对应支付二维码，用户打开支付宝或者微信扫一扫功能，进行扫码支付。&lt;br&gt;
    
    </summary>
    
      <category term="接口文档" scheme="http://yoursite.com/categories/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/"/>
    
    
      <category term="支付" scheme="http://yoursite.com/tags/%E6%94%AF%E4%BB%98/"/>
    
      <category term="动态码" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E7%A0%81/"/>
    
  </entry>
  
</feed>
